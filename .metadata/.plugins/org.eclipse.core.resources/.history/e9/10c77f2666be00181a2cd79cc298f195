import java.nio.file.attribute.AclEntry.Builder

/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java Library project to get you started.
 * For more details take a look at the Java Libraries chapter in the Gradle
 * user guide available at https://docs.gradle.org/4.10.2/userguide/java_library_plugin.html
 */

plugins {
    // Apply the java-library plugin to add support for Java Library
    id 'java'
}
sourceCompatibility = '1.7'
targetCompatibility = '1.7'



dependencies {
 
 

   
}

// In this section you declare where to find the dependencies of your project
repositories {
    // Use jcenter for resolving your dependencies.
    // You can declare any Maven/Ivy/file repository here.
    jcenter()
}

allprojects{
		
   apply plugin:'java'
   repositories{
	   jcenter()
	   maven{ url 'http://maven.aliyun.com/nexus/content/groups/public/'}
	   
	   }
	ext{
		liferaySDKPath="/home/jiayang/docker-liferay/liferay/liferay-plugins-sdk-6.1.1/"
	}
	dependencies
	{
	 
	   // This dependency is used internally, and not exposed to consumers on their own compile classpath.
	   implementation 'com.google.guava:guava:23.0'
   
	   // Use JUnit test framework
	   testImplementation 'junit:junit:4.12'
	   
	}
	//直接将库引入到liferay项目中
	
}
subprojects{
	apply plugin:'java'
	dependencies{
		
		
	}
	
	jar {
		manifest {
			attributes(
					"Manifest-Version": 1.0,
					/*"Main-Class": "com.testbird.rio.Main"*/)
		}
		from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
		into('assets') {
			from 'assets'
		}
	}
	
	
	
	
	task libcp(type:Copy){
		//from 'build/libs/*'
		//into "/home/jiayang/docker-liferay/liferay/liferay-plugins-sdk-6.1.1/portlets/*/docroot/WEB-INF/lib"
		new File("${liferaySDKPath}/portlets/").eachDir{
			
			from fileTree("${projectDir}/build/libs/")
			into "${it.canonicalPath}/docroot/WEB-INF/lib"
			}
		
			
		
	}
	libcp.dependsOn jar
	
}

project(':portlet-extends'){
	
	apply plugin:'java'
	
		ext{
			liferay=[version:'1.0.3']
			liferay.util=[version:'1.0.0']
			portletApi=[version:'2.0']
			servletApi=[version:"3.1.0"]
		}
	dependencies{
		compileOnly "com.liferay.portal:com.liferay.util.bridges:${liferay.util.version}"
		compileOnly "javax.portlet:portlet-api:${portletApi.version}"
		// https://mvnrepository.com/artifact/javax.servlet/javax.servlet-api
		compileOnly "javax.servlet:javax.servlet-api:${servletApi.version}"
		compileOnly "com.liferay.portal:com.liferay.portal.kernel:${liferay.version}"
		
	}
		
		
}


